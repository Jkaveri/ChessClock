<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Game Clock</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" media="screen" />
    <!--<link href="css/bootstrap/bootstrap-responsive.css" rel="stylesheet" media="screen" />-->

    <!-- Font Awesome  -->
    <link href="css/fontawesome/css/font-awesome.min.css" rel="stylesheet" />

    <!-- Main -->
    <link href="css/main.min.css" rel="stylesheet" />
</head>
<body ng-app>
    <!--Main Div-->
    <div id="mainDiv" class="container-fluid pagination-centered" ng-controller="MainController">

        <div class="row-fluid" style="height: 13%">
            <button class="btn turnBtn"
                data-ng-click="p2turn()"
                data-ng-disable="gameState!=GameStates.p1turn"
                data-ng-class="{
                    'btn-success' : gameState==GameStates.p1turn,
                    'btn-inverse':gameState==GameStates.p2turn,
                    'disabled':gameState!=GameStates.p1turn
                }">
                <div data-ng-show="gameState==GameStates.p1turn" style="height: 100%">End Turn</div>
            </button>
        </div>
        <div id="p1time" class="row-fluid clock" style="height: 30%">

            <span data-bind="{text: p1.min}">{{p1.min}}</span>
            <span class="point">:</span>
            <span data-bind="{text: p1.sec}">{{p1.sec}}</span>
            <span class="point">:</span>
            <span data-bind="{text: p1.mil}">{{p1.mil}}</span>

        </div>
        <div class="row-fluid center" style="height: 15%; width: 50%; min-width: 320px; background: rgba(100,100,100,.6); position: relative; border-radius: 4px">
            <div class="row-fluid center span10 offset1" style="height: 100%">
                <button class="span4  btn game-button btn-inverse" data-bind="{click: play_pause}" ng-click="play_pause()">
                    <i class="icon-play" data-ng-show="gameState==GameStates.paused"></i>
                    <i class="icon-pause" data-ng-show="gameState!=GameStates.paused"></i>
                    <!--Play/Pause-->
                </button>
                <button class="span4 btn game-button btn-inverse" data-bind="{click: reset}" ng-click="reset()">
                    <i class="icon-repeat"></i>
                    <!--Reset-->
                </button>
                <button class="span4 btn game-button btn-inverse"><i class="icon-cog"></i></button>
            </div>
        </div>
        <div class="row-fluid clock" style="height: 30%">

            <span data-bind="{text: p2.min}">{{p2.min}}</span>
            <span class="point">:</span>
            <span data-bind="{text: p2.sec}">{{p2.sec}}</span>
            <span class="point">:</span>
            <span data-bind="{text: p2.mil}">{{p2.mil}}</span>

        </div>
        <div class="row-fluid" style="height: 13%">
            <button class="btn turnBtn"
                data-ng-click="p1turn()"
                data-ng-disable="gameState!=GameStates.p2turn"
                data-ng-class="{
                    'btn-success':gameState==GameStates.p2turn,
                    'btn-inverse':gameState==GameStates.p1turn,
                    'disabled':gameState!=GameStates.p2turn
                }">
                <div data-ng-show="gameState==GameStates.p2turn" style="height: 100%">End Turn</div>
            </button>
        </div>
    </div>

</body>
<script src="Scripts/jquery/jquery-1.9.0.js"></script>
<script src="Scripts/bootstrap/bootstrap.js"></script>
<script src="scripts/angular/angular.js"></script>
<script src="Scripts/jquery.fittext.js"></script>
<script src="main.js"></script>
<script>
    $(function () {
        function AdjustType() {
            jQuery(".turnBtn div").fitText(0.5);
            jQuery(".clock span").fitText(.5, { 'basedon': '#p1time' });
            jQuery(".game-button").fitText(.2);
        }
        //adjust on resize and intially
        $(window).on('resize', function () {
            AdjustType();
        });
        AdjustType();
        //Adjust type on gamestate changes: 
        var scope = $("#mainDiv").scope();
        scope.$watch('gameState', function () {
            AdjustType();
        });
    });

</script>
</html>
