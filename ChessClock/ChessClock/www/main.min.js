ko.extenders.numeric=function(n,t){var i=ko.computed({read:function(){var r=n(),i=r.toString();return i.length<t&&(i="0"+i),i},write:n});return i(n()),i};var GameStates=function(){function n(){}return n.p1turn=0,n.p2turn=1,n.paused=2,n.p1win=3,n.p2win=4,n}(),Player=function(){function n(){this.min=ko.observable(0).extend({numeric:2}),this.sec=ko.observable(0).extend({numeric:2}),this.mil=ko.observable(0).extend({numeric:1})}return n.prototype.decreaseTime=function(n){var t=this.min(),r=this.sec(),u=this.mil(),i=this.totalTime(),f=6e4,e=1e3;i=i-n,t=Math.floor(i/f),r=Math.floor((i-t*f)/e),u=Math.floor((i-t*f-r*e)/100),t<0&&(t=0,r=0,u=0),this.min(t),this.sec(r),this.mil(u)},n.prototype.totalTime=function(){var n=this.min(),t=this.sec(),i=this.mil();return n*6e4+t*1e3+i*100},n.prototype.setTime=function(n,t,i){this.min(n),this.sec(t),this.mil(i)},n}(),ViewModel=function(){function n(){this.gameTime=100,this.p1=new Player,this.p2=new Player,this.gameState=ko.observable(GameStates.paused),this.gameState(GameStates.p1turn),this.p1.setTime(1,15,0),this.p2.setTime(0,0,20);var n=this;setInterval(function(){n.update()},this.gameTime)}return n.prototype.update=function(){switch(this.gameState()){case GameStates.p1turn:this.p1.decreaseTime(this.gameTime),this.p1.totalTime()==0&&this.gameState(GameStates.p2win);break;case GameStates.p2turn:this.p2.decreaseTime(this.gameTime),this.p2.totalTime()==0&&this.gameState(GameStates.p1win)}},n.prototype.p1turn=function(){this.gameState(GameStates.p1turn)},n.prototype.p2turn=function(){this.gameState(GameStates.p2turn)},n}();$(function(){var n=new ViewModel;ko.applyBindings(n)})